DELIMITER //
CREATE PROCEDURE delete_use_case (
    IN in_case_id INT
)
BEGIN
	SELECT @case_id := in_case_id;
	SELECT @table_name := table_name FROM use_cases WHERE id=@case_id;
    DELETE FROM `use_cases` WHERE id=@case_id;

	SET @drop_table_query = CONCAT('DROP TABLE ', @table_name, ';');

	PREPARE statement FROM @drop_table_query;
	EXECUTE statement;
	DEALLOCATE PREPARE statement;

END //
DELIMITER ;

DELIMITER //
CREATE PROCEDURE delete_use_case (
    IN in_case_id INT
)
BEGIN
	SELECT @case_id := in_case_id;
	SELECT @table_name := `table_name` FROM `use_cases` WHERE `id`=@case_id;
	DELETE FROM `use_cases` WHERE id = @case_id;
	
	SET @drop_table_query = CONCAT('DROP TABLE `', @table_name, '`;');

	PREPARE statement FROM @drop_table_query;
	EXECUTE statement;
	DEALLOCATE PREPARE statement;
END //
DELIMITER ;